#!/bin/sh
# Script tstseq15a for CDCE72010 testing

echo "admin probe"
./swctl 0xF1000000 0xF2FF0000 settime
./swctl 0xF1000000 0xF2FF0000 admin

./swctl 0xDE000000 0xDFFF0000 wreset 8
./swctl 0xDE000000 0xDFFF0000 wwctl 8 0x8000000F
./swctl 0xDE000000 0xDFFF0000 wop 8 initialize
./swctl 0xDE000000 0xDFFF0000 wop 8 start

./swctl 0xDE000000 0xDFFF0000 wread 8 0x00 13

./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x00 0x682C005
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x04 0x6880002
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x08 0x8380000  # ADC  div2 = 245.60
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x0C 0x6800000
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x10 0xE980000  # FPGA div2 = 245.60
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x14 0x6800000
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x18 0x6800000
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x1C 0x8340001  # DAC  div1 = 491.52
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x20 0x6800001
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x24 0x68050CC
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x28 0x05FC270
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x2C 0x0000040
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x30 0x0000180

./swctl 0xDE000000 0xDFFF0000 wread 8 0x00 13
sleep 1
echo look for 9f0 at 0x30
./swctl 0xDE000000 0xDFFF0000 wread 8 0x00 13
echo fcount in KHz
./swctl 0xDE000000 0xDFFF0000 wread 8 0xC00 1
