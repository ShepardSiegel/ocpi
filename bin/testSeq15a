#!/bin/sh
# Script tstseq15a for CDCE72010 testing

echo "admin probe"
./swctl 0xF1000000 0xF2FF0000 settime
./swctl 0xF1000000 0xF2FF0000 admin

./swctl 0xDE000000 0xDFFF0000 wreset 8
./swctl 0xDE000000 0xDFFF0000 wwctl 8 0x8000000F
./swctl 0xDE000000 0xDFFF0000 wop 8 initialize
./swctl 0xDE000000 0xDFFF0000 wop 8 start

./swctl 0xDE000000 0xDFFF0000 wread 8 0x00 13

./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x00 0x682C005
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x04 0x6880002
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x08 0x8380000  # ADC  div2 = 245.60
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x0C 0x6800000
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x10 0xE980000  # FPGA div2 = 245.60
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x14 0x6800000
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x18 0x6800000
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x1C 0x8340001  # DAC  div1 = 491.52
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x20 0x6800001
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x24 0x68050CC
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x28 0x05FC270
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x2C 0x0000040
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x30 0x0000180

./swctl 0xDE000000 0xDFFF0000 wread 8 0x00 13
sleep 1
echo look for 9f0 at 0x30
./swctl 0xDE000000 0xDFFF0000 wread 8 0x00 13
echo fcount in KHz
./swctl 0xDE000000 0xDFFF0000 wread 8 0xC00 1

# DAC Programming....
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x400 0x70
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x404 0x11
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x408 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x40C 0x10
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x410 0xFF
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x414 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x418 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x41C 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x420 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x424 0x7A
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x428 0xB6
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x42C 0xEA
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x430 0x45
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x434 0x1A
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x438 0x16
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x43C 0xAA
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x440 0xC6
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x444 0x24
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x448 0x02
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x44C 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x450 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x454 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x458 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x45C 0x04  # Turn on readback
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x460 0x83
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x464 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x468 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x46C 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x470 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x474 0x00
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x478 0x24
./swctl 0xDE000000 0xDFFF0000 wwrite 8 0x47C 0x52

./swctl 0xDE000000 0xDFFF0000 wread 8 0x400 32 
