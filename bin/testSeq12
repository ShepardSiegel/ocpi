#!/bin/sh
# Script for debugging Flash

./swctl 0xDE000000 0xDFFF0000 settime
./swctl 0xDE000000 0xDFFF0000 admin
./swctl 0xDE000000 0xDFFF0000 wreset 9
#./swctl 0xDE000000 0xDFFF0000 wunreset 9
./swctl 0xDE000000 0xDFFF0000 wwctl 9 0x80000005
./swctl 0xDE000000 0xDFFF0000 wop 9 initialize
./swctl 0xDE000000 0xDFFF0000 wop 9 start
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 0"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x0
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 1"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x1
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 2"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x2
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 4"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x4
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 8"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x8
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 0x100"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x100
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 0x1000"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x1000
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 0x100000"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x10000
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5
echo "read addr 0x10000"
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x8  0x100000
./swctl 0xDE000000 0xDFFF0000 wwrite 9 0x18 0x0
./swctl 0xDE000000 0xDFFF0000 wread 9 0x0 5

echo "read using flatmap"
./swctl 0xDE000000 0xDFFF0000 wread 9 0x080000 10
